<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/MojsAjsli/Documentation/SOLID_Analysis.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MojsAjsli/Documentation/SOLID_Analysis.md" />
              <option name="updatedContent" value="# Analiza SOLID - Mojs Ajsli&#10;&#10;## Wprowadzone ulepszenia zgodnie z zasadami SOLID&#10;&#10;### ✅ 1. SRP (Single Responsibility Principle)&#10;&#10;**Problem:** &#10;- `MainWindow.xaml.cs` miał zbyt wiele odpowiedzialności (UI, logika biznesowa, formatowanie, koordynacja)&#10;&#10;**Rozwiązanie:**&#10;- **TableManagementPresenter** - odpowiada TYLKO za logikę biznesową stolików&#10;- **OrderManagementPresenter** - odpowiada TYLKO za logikę biznesową zamówień&#10;- **PriceFormatter, TimeFormatter, TableStatusFormatter** - odpowiadają TYLKO za formatowanie&#10;- **MainWindow** - teraz odpowiada TYLKO za prezentację i delegację do presenterów&#10;&#10;**Korzyści:**&#10;- Łatwiejsze testowanie (można testować logikę bez UI)&#10;- Łatwiejsza konserwacja (zmiany w logice nie wpływają na UI)&#10;- Możliwość ponownego użycia logiki w innych miejscach&#10;&#10;### ✅ 2. OCP (Open/Closed Principle)&#10;&#10;**Istniejące dobre praktyki:**&#10;- **Wzorzec Strategy** - nowe strategie cenowe można dodawać bez modyfikacji istniejącego kodu&#10;- **Wzorzec Decorator** - nowe dodatki do dań można dodawać bez zmiany klas bazowych&#10;- **Wzorzec State** - nowe stany zamówień można dodawać bez modyfikacji logiki&#10;&#10;**Przykład:**&#10;```csharp&#10;// Nowa strategia cenowa - NIE wymaga modyfikacji CashierService&#10;public class WeekendDiscountStrategy : IPricingStrategy&#10;{&#10;    public string Name =&gt; &quot;Zniżka weekendowa&quot;;&#10;    public decimal CalculatePrice(Order order) =&gt; order.TotalPrice * 0.85m;&#10;    public int GetDiscountPercentage() =&gt; 15;&#10;}&#10;```&#10;&#10;### ✅ 3. LSP (Liskov Substitution Principle)&#10;&#10;**Dobre praktyki w projekcie:**&#10;- **IDish** - wszystkie dekoratory można podstawić zamiast bazowego dania&#10;- **IPricingStrategy** - wszystkie strategie są wymienne&#10;- **IOrderState** - wszystkie stany zamówienia są wymienne&#10;&#10;**Przykład:**&#10;```csharp&#10;IDish dish = new BaseDish(&quot;Pizza&quot;, &quot;Klasyczna&quot;, 30m, 15);&#10;dish = new ExtraCheeseDecorator(dish); // LSP - nadal IDish&#10;dish = new BaconDecorator(dish);       // LSP - nadal IDish&#10;```&#10;&#10;### ✅ 4. ISP (Interface Segregation Principle)&#10;&#10;**Wprowadzone ulepszenia:**&#10;- **ITableService** - tylko operacje na stolikach&#10;- **IMenuService** - tylko operacje na menu&#10;- **ITextFormatter** - tylko formatowanie (zamiast jednego dużego interfejsu)&#10;&#10;**Problem (przed):**&#10;```csharp&#10;// Zbyt duży interfejs - klient musi implementować wszystko&#10;interface IRestaurantService {&#10;    void ManageTables();&#10;    void ManageOrders();&#10;    void ManagePayments();&#10;    void ManageKitchen();&#10;    void GenerateReports();&#10;}&#10;```&#10;&#10;**Rozwiązanie (teraz):**&#10;```csharp&#10;// Małe, wyspecjalizowane interfejsy&#10;interface ITableService { /* tylko stoliki */ }&#10;interface IMenuService { /* tylko menu */ }&#10;interface ITextFormatter { /* tylko formatowanie */ }&#10;```&#10;&#10;### ✅ 5. DIP (Dependency Inversion Principle)&#10;&#10;**Problem (przed):**&#10;```csharp&#10;// MainWindow zależał od konkretnych implementacji&#10;private readonly TableService _tableService;&#10;private readonly MenuService _menuService;&#10;```&#10;&#10;**Rozwiązanie (teraz):**&#10;```csharp&#10;// Presentery zależą od abstrakcji (interfejsów)&#10;public class TableManagementPresenter&#10;{&#10;    private readonly ITableService _tableService;&#10;    &#10;    public TableManagementPresenter(ITableService tableService)&#10;    {&#10;        _tableService = tableService ?? throw new ArgumentNullException(nameof(tableService));&#10;    }&#10;}&#10;```&#10;&#10;**Korzyści:**&#10;- Łatwe mockowanie w testach&#10;- Możliwość podmiany implementacji&#10;- Luźne powiązania między komponentami&#10;&#10;## Wzorce projektowe a SOLID&#10;&#10;### Wzorce wspierające SOLID:&#10;&#10;1. **Strategy** → OCP, DIP&#10;   - Nowe strategie bez modyfikacji kodu&#10;   - Zależność od interfejsu `IPricingStrategy`&#10;&#10;2. **Decorator** → OCP, SRP&#10;   - Nowe funkcjonalności bez modyfikacji bazowej klasy&#10;   - Każdy dekorator ma jedną odpowiedzialność&#10;&#10;3. **State** → OCP, SRP&#10;   - Nowe stany bez modyfikacji kontekstu&#10;   - Każdy stan ma własną logikę&#10;&#10;4. **Mediator** → SRP, DIP&#10;   - Komponenty nie komunikują się bezpośrednio&#10;   - Zależność od interfejsu `IRestaurantMediator`&#10;&#10;5. **Observer** → OCP, DIP&#10;   - Nowi obserwatorzy bez modyfikacji subiektu&#10;   - Zależność od interfejsu `IObserver&lt;T&gt;`&#10;&#10;## Przykłady użycia (po refaktoryzacji)&#10;&#10;### Zarządzanie stolikami:&#10;```csharp&#10;var tablePresenter = new TableManagementPresenter(tableService);&#10;tablePresenter.NotificationRequested += (s, msg) =&gt; ShowNotification(msg);&#10;&#10;var result = tablePresenter.OccupyTable(1, 4);&#10;if (result.Success)&#10;{&#10;    UpdateUI();&#10;}&#10;```&#10;&#10;### Zarządzanie zamówieniami:&#10;```csharp&#10;var orderPresenter = new OrderManagementPresenter(menuService, waiterService);&#10;orderPresenter.OrderChanged += (s, e) =&gt; RefreshOrderView();&#10;&#10;var result = orderPresenter.AddItemToOrder(order, menuItem, &#10;    extraCheese: true, bacon: false, /* ... */);&#10;```&#10;&#10;### Formatowanie:&#10;```csharp&#10;ITextFormatter priceFormatter = new PriceFormatter();&#10;string formatted = priceFormatter.Format(29.99m); // &quot;29,99 zł&quot;&#10;```&#10;&#10;## Podsumowanie&#10;&#10;### Przed refaktoryzacją:&#10;- ❌ MainWindow miał ~750 linii kodu&#10;- ❌ Mieszanie logiki biznesowej z UI&#10;- ❌ Trudne do testowania&#10;- ❌ Zależności od konkretnych implementacji&#10;&#10;### Po refaktoryzacji:&#10;- ✅ Logika biznesowa w Presenterach (~100-150 linii każdy)&#10;- ✅ UI w MainWindow (~400 linii)&#10;- ✅ Łatwe do testowania jednostkowego&#10;- ✅ Zależności od interfejsów (DIP)&#10;- ✅ Każda klasa ma jedną odpowiedzialność (SRP)&#10;&#10;## Następne kroki (opcjonalne):&#10;&#10;1. **Dependency Injection Container** - użycie np. Microsoft.Extensions.DependencyInjection&#10;2. **MVVM Pattern** - pełne oddzielenie UI od logiki&#10;3. **Unit Tests** - testy dla presenterów i serwisów&#10;4. **Repository Pattern** - dla dostępu do danych (jeśli będzie baza danych)&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MojsAjsli/Formatters/ITextFormatter.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MojsAjsli/Formatters/ITextFormatter.cs" />
              <option name="originalContent" value="using MojsAjsli.Models;&#10;using System.Collections.ObjectModel;&#10;&#10;namespace MojsAjsli.Services.Interfaces;&#10;&#10;/// &lt;summary&gt;&#10;/// Interfejs serwisu zarządzania stolikami - DIP (Dependency Inversion Principle)&#10;/// &lt;/summary&gt;&#10;public interface ITableService&#10;{&#10;    ObservableCollection&lt;Table&gt; Tables { get; }&#10;    &#10;    Table? GetTable(int number);&#10;    List&lt;Table&gt; GetFreeTables();&#10;    List&lt;Table&gt; GetOccupiedTables();&#10;    List&lt;Table&gt; GetTablesForGuests(int guestCount);&#10;    &#10;    bool SeatGuests(int tableNumber, int guestCount);&#10;    void FreeTable(int tableNumber);&#10;    void CleanTable(int tableNumber);&#10;    &#10;    int GetFreeTablesCount();&#10;    int GetOccupiedTablesCount();&#10;    int GetTotalSeats();&#10;    int GetOccupiedSeats();&#10;}&#10;&#10;" />
              <option name="updatedContent" value="namespace MojsAjsli.Formatters;&#10;&#10;/// &lt;summary&gt;&#10;/// Interfejs do formatowania tekstu - ISP (Interface Segregation Principle)&#10;/// Klienci nie są zmuszani do zależności od metod, których nie używają&#10;/// &lt;/summary&gt;&#10;public interface ITextFormatter&#10;{&#10;    string Format(object value);&#10;}&#10;&#10;/// &lt;summary&gt;&#10;/// Formatter dla cen&#10;/// &lt;/summary&gt;&#10;public class PriceFormatter : ITextFormatter&#10;{&#10;    public string Format(object value)&#10;    {&#10;        if (value is decimal price)&#10;            return $&quot;{price:N2} zł&quot;;&#10;        return value?.ToString() ?? string.Empty;&#10;    }&#10;}&#10;&#10;/// &lt;summary&gt;&#10;/// Formatter dla czasu&#10;/// &lt;/summary&gt;&#10;public class TimeFormatter : ITextFormatter&#10;{&#10;    private readonly string _format;&#10;&#10;    public TimeFormatter(string format = &quot;HH:mm:ss&quot;)&#10;    {&#10;        _format = format;&#10;    }&#10;&#10;    public string Format(object value)&#10;    {&#10;        if (value is DateTime dateTime)&#10;            return dateTime.ToString(_format);&#10;        return value?.ToString() ?? string.Empty;&#10;    }&#10;}&#10;&#10;/// &lt;summary&gt;&#10;/// Formatter dla statusów stolików&#10;/// &lt;/summary&gt;&#10;public class TableStatusFormatter : ITextFormatter&#10;{&#10;    public string Format(object value)&#10;    {&#10;        if (value is not MojsAjsli.Models.TableStatus status)&#10;            return string.Empty;&#10;&#10;        return status switch&#10;        {&#10;            MojsAjsli.Models.TableStatus.Free =&gt; &quot;Wolny&quot;,&#10;            MojsAjsli.Models.TableStatus.Occupied =&gt; &quot;Zajęty&quot;,&#10;            MojsAjsli.Models.TableStatus.Reserved =&gt; &quot;Zarezerwowany&quot;,&#10;            MojsAjsli.Models.TableStatus.NeedsCleaning =&gt; &quot;Do sprzątania&quot;,&#10;            _ =&gt; &quot;Nieznany&quot;&#10;        };&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MojsAjsli/Presenters/OrderManagementPresenter.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MojsAjsli/Presenters/OrderManagementPresenter.cs" />
              <option name="updatedContent" value="using System.Collections.ObjectModel;&#10;using MojsAjsli.Models;&#10;using MojsAjsli.Patterns.Decorator;&#10;using MojsAjsli.Patterns.State;&#10;using MojsAjsli.Services;&#10;using MojsAjsli.Services.Interfaces;&#10;&#10;namespace MojsAjsli.Presenters;&#10;&#10;/// &lt;summary&gt;&#10;/// Presenter do zarządzania zamówieniami - SRP (Single Responsibility Principle)&#10;/// Odpowiada TYLKO za logikę biznesową związaną z zamówieniami&#10;/// &lt;/summary&gt;&#10;public class OrderManagementPresenter&#10;{&#10;    private readonly IMenuService _menuService;&#10;    private readonly WaiterService _waiterService;&#10;    &#10;    public event EventHandler&lt;string&gt;? NotificationRequested;&#10;    public event EventHandler? OrderChanged;&#10;&#10;    public OrderManagementPresenter(IMenuService menuService, WaiterService waiterService)&#10;    {&#10;        _menuService = menuService ?? throw new ArgumentNullException(nameof(menuService));&#10;        _waiterService = waiterService ?? throw new ArgumentNullException(nameof(waiterService));&#10;    }&#10;&#10;    public (bool Success, string Message) AddItemToOrder(Order order, MenuItem menuItem, &#10;        bool extraCheese, bool bacon, bool spicySauce, bool glutenFree, bool extraPortion)&#10;    {&#10;        if (order == null)&#10;        {&#10;            return (false, &quot;Najpierw zajmij stolik!&quot;);&#10;        }&#10;&#10;        try&#10;        {&#10;            IDish dish = _menuService.CreateDishWithExtras(&#10;                menuItem, extraCheese, bacon, spicySauce, glutenFree, extraPortion);&#10;&#10;            _waiterService.AddItemToOrder(order, dish);&#10;            &#10;            var message = $&quot;Dodano: {dish.GetDescription()} ({dish.GetPrice():N2} zł)&quot;;&#10;            NotificationRequested?.Invoke(this, message);&#10;            OrderChanged?.Invoke(this, EventArgs.Empty);&#10;            &#10;            return (true, message);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return (false, ex.Message);&#10;        }&#10;    }&#10;&#10;    public (bool Success, string Message) RemoveItemFromOrder(Order order, IDish dish)&#10;    {&#10;        if (order == null)&#10;        {&#10;            return (false, &quot;Brak aktywnego zamówienia!&quot;);&#10;        }&#10;&#10;        try&#10;        {&#10;            _waiterService.RemoveItemFromOrder(order, dish);&#10;            var message = $&quot;Usunięto: {dish.GetName()}&quot;;&#10;            NotificationRequested?.Invoke(this, message);&#10;            OrderChanged?.Invoke(this, EventArgs.Empty);&#10;            return (true, message);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return (false, ex.Message);&#10;        }&#10;    }&#10;&#10;    public (bool Success, string Message) SubmitOrder(Order order)&#10;    {&#10;        if (order == null || order.Items.Count == 0)&#10;        {&#10;            return (false, &quot;Zamówienie jest puste!&quot;);&#10;        }&#10;&#10;        try&#10;        {&#10;            _waiterService.SubmitOrder(order);&#10;            var message = $&quot;Zamówienie #{order.Id} wysłane do kuchni&quot;;&#10;            NotificationRequested?.Invoke(this, message);&#10;            OrderChanged?.Invoke(this, EventArgs.Empty);&#10;            return (true, message);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return (false, ex.Message);&#10;        }&#10;    }&#10;&#10;    public (bool Success, string Message) UndoLastAction(Order order)&#10;    {&#10;        if (order == null) return (false, &quot;Brak aktywnego zamówienia!&quot;);&#10;&#10;        try&#10;        {&#10;            _waiterService.UndoLastAction(order);&#10;            NotificationRequested?.Invoke(this, &quot;Cofnięto ostatnią akcję (Memento)&quot;);&#10;            OrderChanged?.Invoke(this, EventArgs.Empty);&#10;            return (true, &quot;Cofnięto&quot;);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return (false, ex.Message);&#10;        }&#10;    }&#10;&#10;    public (bool Success, string Message) RedoAction(Order order)&#10;    {&#10;        if (order == null) return (false, &quot;Brak aktywnego zamówienia!&quot;);&#10;&#10;        try&#10;        {&#10;            _waiterService.RedoAction(order);&#10;            NotificationRequested?.Invoke(this, &quot;Powtórzono akcję (Memento)&quot;);&#10;            OrderChanged?.Invoke(this, EventArgs.Empty);&#10;            return (true, &quot;Powtórzono&quot;);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return (false, ex.Message);&#10;        }&#10;    }&#10;&#10;    public bool CanUndo(Order? order) =&gt; order != null &amp;&amp; _waiterService.CanUndo(order);&#10;    public bool CanRedo(Order? order) =&gt; order != null &amp;&amp; _waiterService.CanRedo(order);&#10;    public Order CreateOrder(int tableNumber) =&gt; _waiterService.CreateOrder(tableNumber);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MojsAjsli/Presenters/TableManagementPresenter.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MojsAjsli/Presenters/TableManagementPresenter.cs" />
              <option name="updatedContent" value="using MojsAjsli.Models;&#10;using MojsAjsli.Services.Interfaces;&#10;&#10;namespace MojsAjsli.Presenters;&#10;&#10;/// &lt;summary&gt;&#10;/// Presenter do zarządzania stolikami - SRP (Single Responsibility Principle)&#10;/// Odpowiada TYLKO za logikę biznesową związaną ze stolikami&#10;/// &lt;/summary&gt;&#10;public class TableManagementPresenter&#10;{&#10;    private readonly ITableService _tableService;&#10;    &#10;    public event EventHandler&lt;string&gt;? NotificationRequested;&#10;    public event EventHandler? TableStateChanged;&#10;&#10;    public TableManagementPresenter(ITableService tableService)&#10;    {&#10;        _tableService = tableService ?? throw new ArgumentNullException(nameof(tableService));&#10;    }&#10;&#10;    public (bool Success, string Message) OccupyTable(int tableNumber, int guestCount)&#10;    {&#10;        var table = _tableService.GetTable(tableNumber);&#10;        if (table == null)&#10;        {&#10;            return (false, &quot;Stolik nie istnieje!&quot;);&#10;        }&#10;&#10;        if (_tableService.SeatGuests(tableNumber, guestCount))&#10;        {&#10;            var message = $&quot;Stolik {tableNumber} zajęty przez {guestCount} gości&quot;;&#10;            NotificationRequested?.Invoke(this, message);&#10;            TableStateChanged?.Invoke(this, EventArgs.Empty);&#10;            return (true, message);&#10;        }&#10;&#10;        return (false, $&quot;Nie można posadzić {guestCount} gości przy tym stoliku!&quot;);&#10;    }&#10;&#10;    public (bool Success, string Message) FreeTable(int tableNumber)&#10;    {&#10;        var table = _tableService.GetTable(tableNumber);&#10;        if (table == null)&#10;        {&#10;            return (false, &quot;Stolik nie istnieje!&quot;);&#10;        }&#10;&#10;        _tableService.FreeTable(tableNumber);&#10;        var message = $&quot;Stolik {tableNumber} zwolniony&quot;;&#10;        NotificationRequested?.Invoke(this, message);&#10;        TableStateChanged?.Invoke(this, EventArgs.Empty);&#10;        return (true, message);&#10;    }&#10;&#10;    public (bool Success, string Message) CleanTable(int tableNumber)&#10;    {&#10;        var table = _tableService.GetTable(tableNumber);&#10;        if (table == null)&#10;        {&#10;            return (false, &quot;Stolik nie istnieje!&quot;);&#10;        }&#10;&#10;        _tableService.CleanTable(tableNumber);&#10;        var message = $&quot;Stolik {tableNumber} wyczyszczony&quot;;&#10;        NotificationRequested?.Invoke(this, message);&#10;        TableStateChanged?.Invoke(this, EventArgs.Empty);&#10;        return (true, message);&#10;    }&#10;&#10;    public Table? GetSelectedTable(int tableNumber) =&gt; _tableService.GetTable(tableNumber);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MojsAjsli/Services/Interfaces/IMenuService.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MojsAjsli/Services/Interfaces/IMenuService.cs" />
              <option name="updatedContent" value="using MojsAjsli.Models;&#10;using MojsAjsli.Patterns.Decorator;&#10;&#10;namespace MojsAjsli.Services.Interfaces;&#10;&#10;/// &lt;summary&gt;&#10;/// Interfejs serwisu menu - DIP (Dependency Inversion Principle)&#10;/// &lt;/summary&gt;&#10;public interface IMenuService&#10;{&#10;    List&lt;MenuItem&gt; GetAllItems();&#10;    List&lt;MenuItem&gt; GetItemsByCategory(DishCategory category);&#10;    List&lt;MenuItem&gt; GetItemsInPriceRange(decimal minPrice, decimal maxPrice);&#10;    &#10;    IDish CreateDish(MenuItem menuItem);&#10;    IDish CreateDishWithExtras(MenuItem menuItem, bool extraCheese = false, bool bacon = false,&#10;        bool spicySauce = false, bool glutenFree = false, bool extraPortion = false, bool veganOption = false);&#10;    &#10;    int MenuItemsCount { get; }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MojsAjsli/Services/Interfaces/ITableService.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MojsAjsli/Services/Interfaces/ITableService.cs" />
              <option name="updatedContent" value="using MojsAjsli.Models;&#10;using System.Collections.ObjectModel;&#10;&#10;namespace MojsAjsli.Services.Interfaces;&#10;&#10;/// &lt;summary&gt;&#10;/// Interfejs serwisu zarządzania stolikami - DIP (Dependency Inversion Principle)&#10;/// &lt;/summary&gt;&#10;public interface ITableService&#10;{&#10;    ObservableCollection&lt;Table&gt; Tables { get; }&#10;    &#10;    Table? GetTable(int number);&#10;    List&lt;Table&gt; GetFreeTables();&#10;    List&lt;Table&gt; GetOccupiedTables();&#10;    List&lt;Table&gt; GetTablesForGuests(int guestCount);&#10;    &#10;    bool SeatGuests(int tableNumber, int guestCount);&#10;    void FreeTable(int tableNumber);&#10;    void CleanTable(int tableNumber);&#10;    &#10;    int GetFreeTablesCount();&#10;    int GetOccupiedTablesCount();&#10;    int GetTotalSeats();&#10;    int GetOccupiedSeats();&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MojsAjsli/Services/MenuService.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MojsAjsli/Services/MenuService.cs" />
              <option name="originalContent" value="using MojsAjsli.Models;&#10;using MojsAjsli.Patterns.Decorator;&#10;using MojsAjsli.Patterns.Iterator;&#10;&#10;namespace MojsAjsli.Services;&#10;&#10;public class MenuService&#10;{&#10;    private static MenuService? _instance;&#10;    private static readonly object _lock = new();&#10;    private readonly MenuAggregate _menu = new();&#10;&#10;    public static MenuService Instance&#10;    {&#10;        get&#10;        {&#10;            if (_instance == null)&#10;            {&#10;                lock (_lock)&#10;                {&#10;                    _instance ??= new MenuService();&#10;                }&#10;            }&#10;            return _instance;&#10;        }&#10;    }&#10;&#10;    private MenuService()&#10;    {&#10;        InitializeMenu();&#10;    }&#10;&#10;    private void InitializeMenu()&#10;    {&#10;        // Przystawki - klimat pustyni&#10;        _menu.AddItem(new MenuItem(&quot;Zupa Bantha&quot;, 15.00m, DishCategory.Appetizer, &quot;Kremowa zupa z korzeni pustynnych&quot;, 5));&#10;        _menu.AddItem(new MenuItem(&quot;Grillowane Dewbacki&quot;, 18.00m, DishCategory.Appetizer, &quot;Pikantne kąski z grilla&quot;, 8));&#10;        _menu.AddItem(new MenuItem(&quot;Kraykaty w Czosnku&quot;, 28.00m, DishCategory.Appetizer, &quot;Smażone w aromatycznych przyprawach&quot;, 10));&#10;&#10;        // Dania główne&#10;        _menu.AddItem(new MenuItem(&quot;Burger Pustynnego Łowcy&quot;, 25.00m, DishCategory.MainCourse, &quot;Soczysty burger z lokalnego mięsa&quot;, 15));&#10;        _menu.AddItem(new MenuItem(&quot;Pizza Jawajska&quot;, 30.00m, DishCategory.MainCourse, &quot;Pizza z pieczarkami i ziołami pustynnymi&quot;, 20));&#10;        _menu.AddItem(new MenuItem(&quot;Makaron Tatuinowy&quot;, 28.00m, DishCategory.MainCourse, &quot;Makaron z pikantnym sosem i warzywami&quot;, 15));&#10;        _menu.AddItem(new MenuItem(&quot;Stek z Nerfa&quot;, 55.00m, DishCategory.MainCourse, &quot;Grillowany stek z lokalnych hodowli&quot;, 25));&#10;        _menu.AddItem(new MenuItem(&quot;Ryba Panna z Wydm&quot;, 35.00m, DishCategory.MainCourse, &quot;Smażona w chrupiącej panierce&quot;, 18));&#10;&#10;        // Wegetariańskie&#10;        _menu.AddItem(new MenuItem(&quot;Sałatka Fermy Wilgoci&quot;, 22.00m, DishCategory.Vegetarian, &quot;Świeże warzywa z lokalnych upraw&quot;, 8));&#10;        _menu.AddItem(new MenuItem(&quot;Burger Zbieracza&quot;, 24.00m, DishCategory.Vegetarian, &quot;Burger z warzywnym kotletem&quot;, 15));&#10;&#10;        // Desery&#10;        _menu.AddItem(new MenuItem(&quot;Słodkie Muffiny&quot;, 18.00m, DishCategory.Dessert, &quot;Tradycyjny deser z korzeniami&quot;, 5));&#10;        _menu.AddItem(new MenuItem(&quot;Lodowa Kula z Hoth&quot;, 15.00m, DishCategory.Dessert, &quot;Zimny deser w upalne dni&quot;, 8));&#10;&#10;        // Napoje&#10;        _menu.AddItem(new MenuItem(&quot;Niebieskie Mleko&quot;, 8.00m, DishCategory.Drink, &quot;Słynny napój z farm wilgoci&quot;, 2));&#10;        _menu.AddItem(new MenuItem(&quot;Caf Coruscański&quot;, 10.00m, DishCategory.Drink, &quot;Mocna kawa z zewnętrznych rubieży&quot;, 2));&#10;        _menu.AddItem(new MenuItem(&quot;Sok z Owoców Endoru&quot;, 12.00m, DishCategory.Drink, &quot;Egzotyczny napój leśny&quot;, 2));&#10;    }&#10;&#10;    public List&lt;MenuItem&gt; GetAllItems() =&gt; _menu.GetAllItems();&#10;&#10;    public List&lt;MenuItem&gt; GetItemsByCategory(DishCategory category)&#10;    {&#10;        var result = new List&lt;MenuItem&gt;();&#10;        var iterator = _menu.CreateCategoryIterator(category);&#10;        while (iterator.HasNext())&#10;            result.Add(iterator.Next());&#10;        return result;&#10;    }&#10;&#10;    public List&lt;MenuItem&gt; GetItemsInPriceRange(decimal minPrice, decimal maxPrice)&#10;    {&#10;        var result = new List&lt;MenuItem&gt;();&#10;        var iterator = _menu.CreatePriceRangeIterator(minPrice, maxPrice);&#10;        while (iterator.HasNext())&#10;            result.Add(iterator.Next());&#10;        return result;&#10;    }&#10;&#10;    public IDish CreateDish(MenuItem menuItem)&#10;    {&#10;        return new BaseDish(menuItem.Name, menuItem.Description, menuItem.BasePrice, menuItem.PreparationTimeMinutes);&#10;    }&#10;&#10;    public IDish CreateDishWithExtras(MenuItem menuItem, bool extraCheese = false, bool bacon = false, &#10;        bool spicySauce = false, bool glutenFree = false, bool extraPortion = false, bool veganOption = false)&#10;    {&#10;        IDish dish = CreateDish(menuItem);&#10;&#10;        if (extraCheese) dish = new ExtraCheeseDecorator(dish);&#10;        if (bacon) dish = new BaconDecorator(dish);&#10;        if (spicySauce) dish = new SpicySauceDecorator(dish);&#10;        if (glutenFree) dish = new GlutenFreeDecorator(dish);&#10;        if (extraPortion) dish = new ExtraPortionDecorator(dish);&#10;        if (veganOption) dish = new VeganOptionDecorator(dish);&#10;&#10;        return dish;&#10;    }&#10;&#10;    public int MenuItemsCount =&gt; _menu.Count;&#10;}&#10;" />
              <option name="updatedContent" value="using MojsAjsli.Models;&#10;using MojsAjsli.Patterns.Decorator;&#10;using MojsAjsli.Patterns.Iterator;&#10;using MojsAjsli.Services.Interfaces;&#10;&#10;namespace MojsAjsli.Services;&#10;/// &lt;summary&gt;&#10;/// Implementacja IMenuService - DIP (Dependency Inversion Principle)&#10;/// Singleton - zapewnia pojedynczą instancję w aplikacji&#10;/// &lt;/summary&gt;&#10;public class MenuService : IMenuService&#10;{&#10;    private static MenuService? _instance;&#10;    private static readonly object _lock = new();&#10;    private readonly MenuAggregate _menu = new();&#10;&#10;    public static MenuService Instance&#10;    {&#10;        get&#10;        {&#10;            if (_instance == null)&#10;            {&#10;                lock (_lock)&#10;                {&#10;                    _instance ??= new MenuService();&#10;                }&#10;            }&#10;            return _instance;&#10;        }&#10;    }&#10;&#10;    private MenuService()&#10;    {&#10;        InitializeMenu();&#10;    }&#10;&#10;    private void InitializeMenu()&#10;    {&#10;        // Przystawki - klimat pustyni&#10;        _menu.AddItem(new MenuItem(&quot;Zupa Bantha&quot;, 15.00m, DishCategory.Appetizer, &quot;Kremowa zupa z korzeni pustynnych&quot;, 5));&#10;        _menu.AddItem(new MenuItem(&quot;Grillowane Dewbacki&quot;, 18.00m, DishCategory.Appetizer, &quot;Pikantne kąski z grilla&quot;, 8));&#10;        _menu.AddItem(new MenuItem(&quot;Kraykaty w Czosnku&quot;, 28.00m, DishCategory.Appetizer, &quot;Smażone w aromatycznych przyprawach&quot;, 10));&#10;&#10;        // Dania główne&#10;        _menu.AddItem(new MenuItem(&quot;Burger Pustynnego Łowcy&quot;, 25.00m, DishCategory.MainCourse, &quot;Soczysty burger z lokalnego mięsa&quot;, 15));&#10;        _menu.AddItem(new MenuItem(&quot;Pizza Jawajska&quot;, 30.00m, DishCategory.MainCourse, &quot;Pizza z pieczarkami i ziołami pustynnymi&quot;, 20));&#10;        _menu.AddItem(new MenuItem(&quot;Makaron Tatuinowy&quot;, 28.00m, DishCategory.MainCourse, &quot;Makaron z pikantnym sosem i warzywami&quot;, 15));&#10;        _menu.AddItem(new MenuItem(&quot;Stek z Nerfa&quot;, 55.00m, DishCategory.MainCourse, &quot;Grillowany stek z lokalnych hodowli&quot;, 25));&#10;        _menu.AddItem(new MenuItem(&quot;Ryba Panna z Wydm&quot;, 35.00m, DishCategory.MainCourse, &quot;Smażona w chrupiącej panierce&quot;, 18));&#10;&#10;        // Wegetariańskie&#10;        _menu.AddItem(new MenuItem(&quot;Sałatka Fermy Wilgoci&quot;, 22.00m, DishCategory.Vegetarian, &quot;Świeże warzywa z lokalnych upraw&quot;, 8));&#10;        _menu.AddItem(new MenuItem(&quot;Burger Zbieracza&quot;, 24.00m, DishCategory.Vegetarian, &quot;Burger z warzywnym kotletem&quot;, 15));&#10;&#10;        // Desery&#10;        _menu.AddItem(new MenuItem(&quot;Słodkie Muffiny&quot;, 18.00m, DishCategory.Dessert, &quot;Tradycyjny deser z korzeniami&quot;, 5));&#10;        _menu.AddItem(new MenuItem(&quot;Lodowa Kula z Hoth&quot;, 15.00m, DishCategory.Dessert, &quot;Zimny deser w upalne dni&quot;, 8));&#10;&#10;        // Napoje&#10;        _menu.AddItem(new MenuItem(&quot;Niebieskie Mleko&quot;, 8.00m, DishCategory.Drink, &quot;Słynny napój z farm wilgoci&quot;, 2));&#10;        _menu.AddItem(new MenuItem(&quot;Caf Coruscański&quot;, 10.00m, DishCategory.Drink, &quot;Mocna kawa z zewnętrznych rubieży&quot;, 2));&#10;        _menu.AddItem(new MenuItem(&quot;Sok z Owoców Endoru&quot;, 12.00m, DishCategory.Drink, &quot;Egzotyczny napój leśny&quot;, 2));&#10;    }&#10;&#10;    public List&lt;MenuItem&gt; GetAllItems() =&gt; _menu.GetAllItems();&#10;&#10;    public List&lt;MenuItem&gt; GetItemsByCategory(DishCategory category)&#10;    {&#10;        var result = new List&lt;MenuItem&gt;();&#10;        var iterator = _menu.CreateCategoryIterator(category);&#10;        while (iterator.HasNext())&#10;            result.Add(iterator.Next());&#10;        return result;&#10;    }&#10;&#10;    public List&lt;MenuItem&gt; GetItemsInPriceRange(decimal minPrice, decimal maxPrice)&#10;    {&#10;        var result = new List&lt;MenuItem&gt;();&#10;        var iterator = _menu.CreatePriceRangeIterator(minPrice, maxPrice);&#10;        while (iterator.HasNext())&#10;            result.Add(iterator.Next());&#10;        return result;&#10;    }&#10;&#10;    public IDish CreateDish(MenuItem menuItem)&#10;    {&#10;        return new BaseDish(menuItem.Name, menuItem.Description, menuItem.BasePrice, menuItem.PreparationTimeMinutes);&#10;    }&#10;&#10;    public IDish CreateDishWithExtras(MenuItem menuItem, bool extraCheese = false, bool bacon = false, &#10;        bool spicySauce = false, bool glutenFree = false, bool extraPortion = false, bool veganOption = false)&#10;    {&#10;        IDish dish = CreateDish(menuItem);&#10;&#10;        if (extraCheese) dish = new ExtraCheeseDecorator(dish);&#10;        if (bacon) dish = new BaconDecorator(dish);&#10;        if (spicySauce) dish = new SpicySauceDecorator(dish);&#10;        if (glutenFree) dish = new GlutenFreeDecorator(dish);&#10;        if (extraPortion) dish = new ExtraPortionDecorator(dish);&#10;        if (veganOption) dish = new VeganOptionDecorator(dish);&#10;&#10;        return dish;&#10;    }&#10;&#10;    public int MenuItemsCount =&gt; _menu.Count;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MojsAjsli/Services/TableService.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MojsAjsli/Services/TableService.cs" />
              <option name="originalContent" value="using MojsAjsli.Models;&#10;using System.Collections.ObjectModel;&#10;&#10;namespace MojsAjsli.Services;&#10;&#10;public class TableService&#10;{&#10;    private readonly ObservableCollection&lt;Table&gt; _tables = new();&#10;&#10;    public ObservableCollection&lt;Table&gt; Tables =&gt; _tables;&#10;&#10;    public TableService()&#10;    {&#10;        InitializeTables();&#10;    }&#10;&#10;    private void InitializeTables()&#10;    {&#10;        _tables.Add(new Table(1, 2));&#10;        _tables.Add(new Table(2, 2));&#10;        _tables.Add(new Table(3, 4));&#10;        _tables.Add(new Table(4, 4));&#10;        _tables.Add(new Table(5, 4));&#10;        _tables.Add(new Table(6, 6));&#10;        _tables.Add(new Table(7, 6));&#10;        _tables.Add(new Table(8, 8));&#10;        _tables.Add(new Table(9, 8));&#10;        _tables.Add(new Table(10, 4));&#10;    }&#10;&#10;    public Table? GetTable(int number)&#10;    {&#10;        return _tables.FirstOrDefault(t =&gt; t.Number == number);&#10;    }&#10;&#10;    public List&lt;Table&gt; GetFreeTables()&#10;    {&#10;        return _tables.Where(t =&gt; t.Status == TableStatus.Free).ToList();&#10;    }&#10;&#10;    public List&lt;Table&gt; GetOccupiedTables()&#10;    {&#10;        return _tables.Where(t =&gt; t.Status == TableStatus.Occupied).ToList();&#10;    }&#10;&#10;    public List&lt;Table&gt; GetTablesForGuests(int guestCount)&#10;    {&#10;        return _tables&#10;            .Where(t =&gt; t.Status == TableStatus.Free &amp;&amp; t.Seats &gt;= guestCount)&#10;            .OrderBy(t =&gt; t.Seats)&#10;            .ToList();&#10;    }&#10;&#10;    public bool SeatGuests(int tableNumber, int guestCount)&#10;    {&#10;        var table = GetTable(tableNumber);&#10;        if (table != null &amp;&amp; table.CanSeat(guestCount))&#10;        {&#10;            table.Occupy(guestCount);&#10;            return true;&#10;        }&#10;        return false;&#10;    }&#10;&#10;    public void FreeTable(int tableNumber)&#10;    {&#10;        var table = GetTable(tableNumber);&#10;        table?.Free();&#10;    }&#10;&#10;    public void CleanTable(int tableNumber)&#10;    {&#10;        var table = GetTable(tableNumber);&#10;        table?.Clean();&#10;    }&#10;&#10;    public int GetFreeTablesCount() =&gt; _tables.Count(t =&gt; t.Status == TableStatus.Free);&#10;    public int GetOccupiedTablesCount() =&gt; _tables.Count(t =&gt; t.Status == TableStatus.Occupied);&#10;    public int GetTotalSeats() =&gt; _tables.Sum(t =&gt; t.Seats);&#10;    public int GetOccupiedSeats() =&gt; _tables.Sum(t =&gt; t.OccupiedSeats);&#10;}&#10;&#10;" />
              <option name="updatedContent" value="using MojsAjsli.Models;&#10;using MojsAjsli.Services.Interfaces;&#10;using System.Collections.ObjectModel;&#10;&#10;namespace MojsAjsli.Services;&#10;&#10;/// &lt;summary&gt;&#10;/// Implementacja ITableService - DIP (Dependency Inversion Principle)&#10;/// &lt;/summary&gt;&#10;public class TableService : ITableService&#10;{&#10;    private readonly ObservableCollection&lt;Table&gt; _tables = new();&#10;&#10;    public ObservableCollection&lt;Table&gt; Tables =&gt; _tables;&#10;&#10;    public TableService()&#10;    {&#10;        InitializeTables();&#10;    }&#10;&#10;    private void InitializeTables()&#10;    {&#10;        _tables.Add(new Table(1, 2));&#10;        _tables.Add(new Table(2, 2));&#10;        _tables.Add(new Table(3, 4));&#10;        _tables.Add(new Table(4, 4));&#10;        _tables.Add(new Table(5, 4));&#10;        _tables.Add(new Table(6, 6));&#10;        _tables.Add(new Table(7, 6));&#10;        _tables.Add(new Table(8, 8));&#10;        _tables.Add(new Table(9, 8));&#10;        _tables.Add(new Table(10, 4));&#10;    }&#10;&#10;    public Table? GetTable(int number)&#10;    {&#10;        return _tables.FirstOrDefault(t =&gt; t.Number == number);&#10;    }&#10;&#10;    public List&lt;Table&gt; GetFreeTables()&#10;    {&#10;        return _tables.Where(t =&gt; t.Status == TableStatus.Free).ToList();&#10;    }&#10;&#10;    public List&lt;Table&gt; GetOccupiedTables()&#10;    {&#10;        return _tables.Where(t =&gt; t.Status == TableStatus.Occupied).ToList();&#10;    }&#10;&#10;    public List&lt;Table&gt; GetTablesForGuests(int guestCount)&#10;    {&#10;        return _tables&#10;            .Where(t =&gt; t.Status == TableStatus.Free &amp;&amp; t.Seats &gt;= guestCount)&#10;            .OrderBy(t =&gt; t.Seats)&#10;            .ToList();&#10;    }&#10;&#10;    public bool SeatGuests(int tableNumber, int guestCount)&#10;    {&#10;        var table = GetTable(tableNumber);&#10;        if (table != null &amp;&amp; table.CanSeat(guestCount))&#10;        {&#10;            table.Occupy(guestCount);&#10;            return true;&#10;        }&#10;        return false;&#10;    }&#10;&#10;    public void FreeTable(int tableNumber)&#10;    {&#10;        var table = GetTable(tableNumber);&#10;        table?.Free();&#10;    }&#10;&#10;    public void CleanTable(int tableNumber)&#10;    {&#10;        var table = GetTable(tableNumber);&#10;        table?.Clean();&#10;    }&#10;&#10;    public int GetFreeTablesCount() =&gt; _tables.Count(t =&gt; t.Status == TableStatus.Free);&#10;    public int GetOccupiedTablesCount() =&gt; _tables.Count(t =&gt; t.Status == TableStatus.Occupied);&#10;    public int GetTotalSeats() =&gt; _tables.Sum(t =&gt; t.Seats);&#10;    public int GetOccupiedSeats() =&gt; _tables.Sum(t =&gt; t.OccupiedSeats);&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>